(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{113:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return K}));var c=n(1),r=n(0),a=n.n(r),s=n(16),i=n.n(s),j=(n(85),n(86),n(75)),o=n(15),l=n(7),d=n(78),b=n(56),u=n(13),O=n.n(u),h=n(21),x=n(11),p=n(6),f=n(29),g=n(10),m=n(22),v=n.n(m),y="http://home-assignment-jacob.herokuapp.com/api/",w=n(24),I=n(32),C=function(){var e=Object(g.c)((function(e){return e.userId})),t=Object(g.c)((function(e){return e.token})),n=Object(r.useState)(""),a=Object(x.a)(n,2),s=a[0],i=a[1],j=Object(r.useState)(""),o=Object(x.a)(j,2),d=o[0],b=o[1],u=Object(r.useState)(""),m=Object(x.a)(u,2),C=m[0],k=m[1],G=Object(r.useState)(),S=Object(x.a)(G,2),A=S[0],L=S[1],R=Object(r.useState)(),T=Object(x.a)(R,2),F=T[0],B=T[1],M=Object(r.useState)(!1),_=Object(x.a)(M,2),q=_[0],z=_[1],N=Object(r.useState)(!1),P=Object(x.a)(N,2),E=P[0],K=P[1],H=function(){var e=Object(h.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:B(!0),v.a.post(y+"write_message",{reciverId:s,subject:d,messageBody:C},{headers:{"Content-Type":"application/json",Authorization:t}}).then((function(e){B(!1),J(),K(!0)})).catch((function(e){B(!1),z(!0)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){L(D())}),[s,d,C]);var J=function(){i(""),b(""),k("")},D=function(){return s&&d&&C};return Object(c.jsx)("div",{className:"col d-flex justify-content-center",children:Object(c.jsx)(w.a,{style:{width:"18rem"},children:Object(c.jsx)(w.a.Body,{children:Object(c.jsxs)(p.a,{dir:"rtl",style:{direction:"rtl",textAlign:"right"},children:[Object(c.jsx)(p.a.Row,{children:Object(c.jsxs)(p.a.Group,{as:l.a,controlId:"formGridSenderId",children:[Object(c.jsx)(p.a.Label,{children:"\u05de\u05d6\u05d4\u05d4 \u05e9\u05d5\u05dc\u05d7:"}),Object(c.jsx)(p.a.Control,{disabled:!0,name:"senderId",type:"text",value:e})]})}),Object(c.jsx)(p.a.Row,{children:Object(c.jsxs)(p.a.Group,{as:l.a,controlId:"formGridReciverId",children:[Object(c.jsx)(p.a.Label,{children:"\u05de\u05d6\u05d4\u05d4 \u05e0\u05de\u05e2\u05df:"}),Object(c.jsx)(p.a.Control,{required:!0,name:"reciverId",value:s,type:"text",placeholder:"\u05d4\u05e7\u05e9 \u05d0\u05ea \u05e9\u05dd \u05d4\u05e0\u05de\u05e2\u05df",onChange:function(e){return i(e.target.value)}})]})}),Object(c.jsx)(p.a.Row,{children:Object(c.jsxs)(p.a.Group,{as:l.a,controlId:"formGridSubject",children:[Object(c.jsx)(p.a.Label,{children:"\u05e0\u05d5\u05e9\u05d0:"}),Object(c.jsx)(p.a.Control,{required:!0,name:"subject",value:d,type:"text",placeholder:"\u05e0\u05d5\u05e9\u05d0",onChange:function(e){return b(e.target.value)}})]})}),Object(c.jsx)(p.a.Row,{children:Object(c.jsxs)(p.a.Group,{as:l.a,controlId:"formGridSenderId",children:[Object(c.jsx)(p.a.Label,{children:"\u05ea\u05d5\u05db\u05df \u05d4\u05d4\u05d5\u05d3\u05e2\u05d4:"}),Object(c.jsx)(p.a.Control,{required:!0,name:"messageBody",value:C,type:"text",placeholder:"\u05ea\u05d5\u05db\u05df \u05d4\u05d4\u05d5\u05d3\u05e2\u05d4 \u05db\u05d0\u05df",as:"textarea",rows:3,onChange:function(e){return k(e.target.value)}})]})}),q?Object(c.jsx)(p.a.Row,{children:Object(c.jsx)(p.a.Group,{as:l.a,controlId:"formGridWrongMsg",children:Object(c.jsx)(I.a,{variant:"danger",onClose:function(){return z(!1)},dismissible:!0,children:Object(c.jsx)("p",{children:"\u05e9\u05dd \u05de\u05e9\u05ea\u05de\u05e9 \u05d0\u05d5 \u05e1\u05d9\u05e1\u05de\u05d4 \u05e9\u05d2\u05d5\u05d9!"})})})}):"",E?Object(c.jsx)(p.a.Row,{children:Object(c.jsx)(p.a.Group,{as:l.a,controlId:"formGridSuccessMsg",children:Object(c.jsx)(I.a,{variant:"success",onClose:function(){return K(!1)},dismissible:!0,children:Object(c.jsx)("p",{children:"\u05e0\u05e9\u05dc\u05d7 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4!"})})})}):"",Object(c.jsx)(p.a.Row,{children:Object(c.jsx)(p.a.Group,{as:l.a,controlId:"formGridSenderId",children:Object(c.jsx)(f.a,{disabled:!A||F,onClick:H,children:F?"\u05e9\u05d5\u05dc\u05d7...":"\u05e9\u05dc\u05d7 \u05d4\u05d5\u05d3\u05e2\u05d4"})})})]})})})})},k=(n(110),n(71)),G=n(31),S=function(){var e=Object(g.c)((function(e){return e.token})),t=Object(g.c)((function(e){return e.msgsList})),n=Object(g.b)(),s=Object(r.useState)(),i=Object(x.a)(s,2),j=i[0],d=i[1],b=function(){var t=Object(h.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:v.a.post(y+"get_all_messages",{},{headers:{"Content-Type":"application/json",Authorization:e}}).then((function(e){n({type:"msgsList",val:e.data.messages}),d(null)}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),u=function(){var t=Object(h.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:d(n),v.a.post(y+"delete_message",{msgId:n},{headers:{"Content-Type":"application/json",Authorization:e}}).then((function(e){b()})).catch((function(e){d(null)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(c.jsxs)(a.a.Fragment,{children:[Object(c.jsx)(o.a,{children:Object(c.jsx)(l.a,{style:{direction:"rtl",textAlign:"center"},children:Array.isArray(t)&&t.length?"":Object(c.jsx)("h3",{children:"\u05d0\u05d9\u05df \u05d4\u05d5\u05d3\u05e2\u05d5\u05ea \u05dc\u05d4\u05e6\u05d2\u05d4"})})}),Object(c.jsx)(o.a,{children:function(){if(void 0!==t)return t.map((function(e,t){return Object(c.jsx)(l.a,{style:{direction:"rtl"},children:Object(c.jsxs)(w.a,{style:{width:"18rem",textAlign:"right",direction:"rtl"},children:[Object(c.jsx)(w.a.Body,{children:Object(c.jsx)(w.a.Title,{children:e.subject})}),Object(c.jsxs)(k.a,{className:"list-group-flush",children:[Object(c.jsxs)(G.a,{children:[Object(c.jsx)("b",{children:"\u05e9\u05d5\u05dc\u05d7: "}),e.sender]}),Object(c.jsxs)(G.a,{children:[Object(c.jsx)("b",{children:"\u05ea\u05d0\u05e8\u05d9\u05da \u05e9\u05dc\u05d9\u05d7\u05d4: "}),e.creation_date]}),Object(c.jsx)(G.a,{children:Object(c.jsx)(p.a.Control,{required:!0,name:"messageBody",defaultValue:e.message,type:"text",placeholder:"\u05ea\u05d5\u05db\u05df \u05d4\u05d4\u05d5\u05d3\u05e2\u05d4 \u05db\u05d0\u05df",as:"textarea",rows:3})})]}),Object(c.jsx)(w.a.Body,{children:Object(c.jsx)(f.a,{disabled:j===e.id,id:e.id,onClick:function(){return u(e.id)},variant:"warning",children:j===e.id?"\u05de\u05d5\u05d7\u05e7...":"\u05de\u05d7\u05e7 \u05d4\u05d5\u05d3\u05e2\u05d4"})})]})},t)}))}()})]})},A=function(){return Object(c.jsx)(a.a.Fragment,{children:Object(c.jsx)(o.a,{children:Object(c.jsx)(l.a,{children:Object(c.jsxs)(d.a,{defaultActiveKey:"create-email",style:{direction:"rtl",textAlign:"right"},id:"emails-tabs",children:[Object(c.jsx)(b.a,{style:{textAlign:"center"},eventKey:"create-email",title:"\u05e9\u05dc\u05d7 \u05d0\u05d9\u05de\u05d9\u05d9\u05dc",children:Object(c.jsx)(C,{})}),Object(c.jsx)(b.a,{eventKey:"menage-emails",title:"\u05e0\u05d9\u05d4\u05d5\u05dc \u05d0\u05d9\u05de\u05d9\u05d9\u05dc\u05d9\u05dd",children:Object(c.jsx)(j.a,{style:{alignContent:"right"},children:Object(c.jsx)(o.a,{children:Object(c.jsx)(l.a,{children:Object(c.jsx)(S,{})})})})})]})})})})},L=n(26),R=n(48),T=n(76),F=function(){var e=Object(r.useState)(),t=Object(x.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(),i=Object(x.a)(s,2),j=i[0],o=i[1],d=Object(r.useState)(!1),b=Object(x.a)(d,2),u=b[0],m=b[1],w=Object(r.useState)(!1),C=Object(x.a)(w,2),k=C[0],G=C[1],S=Object(g.b)(),A=function(e){var t=e.target.name,n=e.target.value;"password"===t&&a(n),"userId"===t&&o(n)},L=function(){var e=Object(h.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.a.post(y+"get_all_messages",{},{headers:{"Content-Type":"application/json",Authorization:t}}).then((function(e){S({type:"msgsList",val:e.data.messages})}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(h.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:G(!0),v.a.post(y+"sign_in",{password:n,userId:j},{headers:{"Content-Type":"application/json"}}).then((function(e){S({type:"token",val:e.data.encodedToken}),S({type:"userId",val:e.data.userId}),S({type:"loginModalOpened",val:!1}),L(e.data.encodedToken)})).catch((function(e){G(!1),m(!0)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.jsx)("div",{children:Object(c.jsxs)(p.a,{dir:"rtl",style:{direction:"rtl",textAlign:"right"},children:[Object(c.jsx)(p.a.Row,{children:Object(c.jsx)(p.a.Group,{as:l.a,controlId:"formGridHeader",children:Object(c.jsx)("h4",{children:"\u05d6\u05d9\u05d4\u05d5\u05d9 \u05de\u05e9\u05ea\u05de\u05e9"})})}),u?Object(c.jsx)(p.a.Row,{children:Object(c.jsx)(p.a.Group,{as:l.a,controlId:"formGridAlert",children:Object(c.jsxs)(I.a,{variant:"danger",onClose:function(){return m(!1)},dismissible:!0,children:[Object(c.jsx)(I.a.Heading,{children:"\u05e9\u05dd \u05de\u05e9\u05ea\u05de\u05e9 \u05d0\u05d5 \u05e1\u05d9\u05e1\u05de\u05d4 \u05e9\u05d2\u05d5\u05d9!"}),Object(c.jsx)("p",{children:"\u05e0\u05d0 \u05e0\u05e1\u05d4 \u05e9\u05e0\u05d9\u05ea"})]})})}):"",Object(c.jsx)(p.a.Row,{children:Object(c.jsxs)(p.a.Group,{as:l.a,controlId:"formGridSenderId",children:[Object(c.jsx)(p.a.Label,{children:"\u05e9\u05dd \u05de\u05e9\u05ea\u05de\u05e9:"}),Object(c.jsx)(p.a.Control,{required:!0,name:"userId",type:"text",placeholder:"\u05e9\u05dd \u05d4\u05de\u05e9\u05ea\u05de\u05e9 \u05e9\u05dc\u05da",onChange:A})]})}),Object(c.jsx)(p.a.Row,{children:Object(c.jsxs)(p.a.Group,{as:l.a,controlId:"formGridPassword",children:[Object(c.jsx)(p.a.Label,{children:"\u05e1\u05d9\u05e1\u05de\u05d4:"}),Object(c.jsx)(p.a.Control,{required:!0,name:"password",type:"password",placeholder:"\u05d4\u05e7\u05e9 \u05e1\u05d9\u05e1\u05de\u05d4",onChange:A})]})}),Object(c.jsx)(p.a.Row,{children:Object(c.jsx)(p.a.Group,{as:l.a,controlId:"formGridPassword",children:Object(c.jsx)(f.a,{disabled:k,onClick:R,children:k?"\u05d8\u05d5\u05e2\u05df...":"\u05d4\u05db\u05e0\u05e1"})})})]})})},B=n(77),M=function(){var e=Object(g.c)((function(e){return e.userId})),t=Object(g.c)((function(e){return e.loginModalOpened})),n=Object(g.b)();return Object(c.jsxs)(a.a.Fragment,{children:[Object(c.jsx)(o.a,{children:Object(c.jsx)(l.a,{children:Object(c.jsx)(T.a,{open:t,onClose:function(){},closeOnEsc:!1,showCloseIcon:!1,center:!0,children:Object(c.jsx)(F,{})})})}),Object(c.jsx)(o.a,{children:Object(c.jsx)(l.a,{children:Object(c.jsxs)(L.a,{bg:"light",variant:"light",style:{textAlign:"right",direction:"rtl"},children:[Object(c.jsx)(L.a.Brand,{children:"\u05d4\u05d5\u05d3\u05e2\u05d5\u05ea.\u05e0\u05d8"}),Object(c.jsx)(L.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(c.jsx)(L.a.Collapse,{className:"justify-content-end",children:Object(c.jsx)(R.a,{className:"mr-auto",children:function(){var t;return t=null!==e&&void 0!==e?Object(c.jsxs)(a.a.Fragment,{children:[Object(c.jsx)(L.a.Text,{style:{marginLeft:"10px",marginRight:"10px"},children:Object(c.jsxs)("h5",{children:[" \u05de\u05e9\u05ea\u05de\u05e9: ",Object(c.jsx)(B.a,{variant:"secondary",children:e})]})}),Object(c.jsx)(f.a,{variant:"info",size:"sm",onClick:function(){return n({type:"loginModalOpened",val:!0})},children:"\u05d4\u05ea\u05d7\u05d1\u05e8 \u05db\u05de\u05e9\u05ea\u05de\u05e9 \u05d0\u05d7\u05e8"})]}):Object(c.jsxs)(a.a.Fragment,{children:[Object(c.jsxs)(L.a.Text,{children:["\u05de\u05e9\u05ea\u05de\u05e9: ",Object(c.jsx)("b",{children:" \u05d0\u05d5\u05e8\u05d7 "})]}),Object(c.jsx)(f.a,{variant:"info",size:"sm",onClick:function(){return n({type:"loginModalOpened",val:!0})},children:"\u05d4\u05ea\u05d7\u05d1\u05e8"})]}),Object(c.jsx)(a.a.Fragment,{children:t})}()})})]})})})]})};var _=function(){return Object(c.jsxs)(j.a,{children:[Object(c.jsx)(o.a,{children:Object(c.jsxs)(l.a,{children:[" ",Object(c.jsx)(M,{})]})}),Object(c.jsx)(o.a,{children:Object(c.jsx)(l.a,{children:Object(c.jsx)(A,{})})})]})},q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,115)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))},z=(n(112),n(19)),N={token:"",userId:"",loginModalOpened:!0,msgsList:[]},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"token":e=Object(z.a)(Object(z.a)({},e),{},{token:t.val});break;case"userId":e=Object(z.a)(Object(z.a)({},e),{},{userId:t.val});break;case"loginModalOpened":e=Object(z.a)(Object(z.a)({},e),{},{loginModalOpened:t.val});break;case"msgsList":e=Object(z.a)(Object(z.a)({},e),{},{msgsList:t.val});break;default:return e}return e},E=n(38),K=Object(E.b)(P);i.a.render(Object(c.jsxs)(g.a,{store:K,children:[" ",Object(c.jsx)(_,{})," "]}),document.getElementById("root")),q()},85:function(e,t,n){},86:function(e,t,n){}},[[113,1,2]]]);
//# sourceMappingURL=main.5abb41fe.chunk.js.map